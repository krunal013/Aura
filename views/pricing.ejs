<!DOCTYPE html>
<html lang="en">

<% if (user.hasPaid) { %>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscribed</title>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: aliceblue;
            background-color: #191a1a;
            background-image: linear-gradient(0deg, transparent 24%, rgba(114, 114, 114, 0.3) 25%, rgba(114, 114, 114, 0.3) 26%, transparent 27%, transparent 74%, rgba(114, 114, 114, 0.3) 75%, rgba(114, 114, 114, 0.3) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(114, 114, 114, 0.3) 25%, rgba(114, 114, 114, 0.3) 26%, transparent 27%, transparent 74%, rgba(114, 114, 114, 0.3) 75%, rgba(114, 114, 114, 0.3) 76%, transparent 77%, transparent);
            background-size: 55px 55px;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            /* Inherit the background image */
            filter: blur(10px);
            /* Apply blur */
            z-index: -1;
            /* Place the blurred background behind the content */
        }

        /* Optional: Add content to the body with some padding and style */
        body>* {
            z-index: 1;
            /* Make sure your content stays above the blurred background */
        }



        img {
            height: auto;
            width: auto;
            filter: drop-shadow(0 0 2px #197d00) drop-shadow(0 0 800px #1faa00) drop-shadow(0 0 70px #8fff6d);
            /* filter: drop-shadow(0 0 2px #51007d) drop-shadow(0 0 800px #8000aa) drop-shadow(0 0 70px #f06dff); */
        }


        .container {
            text-align: center;
            color: #a7a7a7;
            text-shadow: 0 0 5px #012e00, 0 0 8px #000000, 0 0 30px #064b00;
        }

        h1:hover {
            text-shadow: 0 0 5px #000000, 0 0 8px #000000, 0 0 30px #000000;
        }

        .buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .button {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 10px 20px;
            font-size: 1rem;
            color: #bcbcbc;
            background: transparent;
            border: 2px solid #0f0f0f;
            border-radius: 25px;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 0 2px #750099, 0 0 10px #8300c5;
            transition: background 0.3s, color 2s;
            transition: ease ease-in;
        }

        .lable {

            border-radius: 25px;
            background: rgb(41, 1, 67);
            background: radial-gradient(circle, rgba(41, 1, 67, 1) 0%, rgba(14, 0, 29, 1) 100%);

        }

        .lable h1 {
            padding: 12px;
        }

        .button:hover {
            background: #40005e;
            color: #a4a4a4;
            box-shadow: 0 0 200px #750099, 0 0 100px #8300c5;
        }

        @media (max-width: 767px) {
            .buttons {
                display: flex;
                flex-direction: column;
                padding: 20px;
            }

            img {
                height: 200px;
                width: auto;
                filter: drop-shadow(0 0 2px #197d00) drop-shadow(0 0 800px #1faa00) drop-shadow(0 0 70px #8fff6d);
            }

            .lable h1 {
                padding: 12px;
                font-size: 1rem;
            }
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.1);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .container {
            animation: zoomIn 1.5s ease forwards;
        }
    </style>

    <body>
        <div class="container">
            <img src="./images/premium.png" alt="">
            <div class="lable">
                <h1>You've Purchased SuccessFully <%= user.fullname %> !
                </h1>
            </div>

            <div class="buttons">
                <a href="/feed"> <button class="button">Continue Surfing</button></a>
                <a href="/event"> <button class="button">Go To The Events</button></a>
            </div>
        </div>
    </body>
    <script>
        // Check if the page has been reloaded once
        if (!sessionStorage.getItem('reloaded')) {
            // If not, set the flag and reload the page
            sessionStorage.setItem('reloaded', 'true');
            window.location.reload();
        }
    </script>
    <% } else { %>


        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Pricing</title>
            <script src="https://cdn.tailwindcss.com"></script>
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
        </head>
        <%- include('header') %>

            <body>
                <div class="pt-5 bg-gray-900" id="pricing">
                    <div class="mx-auto pb-20 mt-4 max-w-7xl px-6 lg:px-8">
                        <div class="mx-auto max-w-4xl text-center">
                            <h1 class="text-base font-semibold leading-7 text-indigo-400">
                                <%= user.fullname %>
                            </h1>
                            <p class="mt-2 text-4xl font-bold tracking-tight text-white sm:text-5xl">Whether it's just
                                you,
                                or your
                                entire
                                team - we've got you covered.</p>
                        </div>
                        <p class="mx-auto mt-6 max-w-2xl text-center text-lg leading-8 text-gray-300">Choose the Plan
                            that works
                            best</p>
                        <div
                            class="isolate mx-auto mt-10 grid max-w-md grid-cols-1 gap-8 lg:mx-0 lg:max-w-none lg:grid-cols-2">
                            <!-- First Product -->
                            <div class="ring-1 ring-white/10 rounded-3xl p-8 xl:p-10">
                                <div class="flex items-center justify-between gap-x-4">
                                    <h2 id="product1" class="text-lg font-semibold leading-8 text-white">Free Plan</h2>
                                </div>
                                <p class="mt-4 text-sm leading-6 text-gray-300">Your Current Activated Plan</p>
                                <p class="mt-6 flex items-baseline gap-x-1">
                                    <span class="text-4xl font-bold tracking-tight text-white"> â‚¹0 </span><span
                                        class="text-sm font-semibold leading-6 text-gray-300"></span>
                                </p>
                                <a href="#" aria-describedby="product1"
                                    class="bg-white/10 text-white hover:bg-white/20 focus-visible:outline-white mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">free
                                    Plan</a>
                                <ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300 xl:mt-10">
                                    <li class="flex gap-x-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                            fill="currentColor" aria-hidden="true" class="h-6 w-5 flex-none text-white">
                                            <path fill-rule="evenodd"
                                                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                                clip-rule="evenodd"></path>
                                        </svg>Browse Content </li>
                                    <li class="flex gap-x-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                            fill="currentColor" aria-hidden="true" class="h-6 w-5 flex-none text-white">
                                            <path fill-rule="evenodd"
                                                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                                clip-rule="evenodd"></path>
                                        </svg>Like & Upload Posts </li>
                                    <li class="flex gap-x-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                            fill="currentColor" aria-hidden="true" class="h-6 w-5 flex-none text-white">
                                            <path fill-rule="evenodd"
                                                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                                clip-rule="evenodd"></path>
                                        </svg>See the Events Winners</li>
                                </ul>
                            </div>

                            <!-- Second Product -->
                            <div class="bg-white/5 ring-2 ring-indigo-500 rounded-3xl p-8 xl:p-10">
                                <div class="flex items-baseline justify-between gap-x-4">
                                    <h2 id="product2" class="text-lg font-semibold leading-8 text-white">Aura+
                                    </h2>
                                    <p
                                        class="rounded-full bg-indigo-500 px-2.5 py-1 text-xs font-semibold leading-5 text-white">
                                        Most popular</p>
                                </div>
                                <p class="mt-4 text-sm leading-6 text-gray-300">The most popular choice. participate
                                    twice
                                    if you
                                    loase the event
                                </p>
                                <p class="mt-6 flex items-baseline gap-x-1">
                                    <span class="text-4xl font-bold tracking-tight text-white"> â‚¹ 49 </span><span
                                        class="text-sm font-semibold leading-6 text-gray-300"></span>
                                </p>
                                <a href="#" onclick="payNow('plan1')" aria-describedby="product2"
                                    class="bg-yellow-500 text-white shadow-sm hover:bg-indigo-400 focus-visible:outline-indigo-500 mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">Pay
                                    Now</a>
                                <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
                                <script>
                                    async function payNow(plan) {
                                        try {
                                            const response = await fetch('/create-order', {
                                                method: 'POST',
                                                headers: {
                                                    'Content-Type': 'application/json',
                                                },
                                            });

                                            const data = await response.json();

                                            const options = {
                                                key: '<%= process.env.rzp_test_SXcix9cPDGx5eU %>',
                                                amount: data.amount,
                                                currency: data.currency,
                                                name: 'Aura',
                                                description: 'Subscription Payment For Plan 2',
                                                order_id: data.id,
                                                handler: function (response) {
                                                    // Handle successful payment
                                                    console.log(response);
                                                    alert('Payment Successful!');

                                                    // Optionally, send payment info to the server
                                                    fetch('/payment-success', {
                                                        method: 'POST',
                                                        headers: {
                                                            'Content-Type': 'application/json',
                                                        },
                                                        body: JSON.stringify({
                                                            payment_id: response.razorpay_payment_id,
                                                            order_id: response.razorpay_order_id,
                                                            signature: response.razorpay_signature
                                                        })
                                                    }).then(() => {
                                                        window.location.href = '/event';
                                                    });
                                                },
                                                prefill: {
                                                    name: '<%= user.fullname %>',
                                                    email: '<%= user.email %>',
                                                    contact: ''
                                                },
                                                theme: {
                                                    color: "#3399cc"
                                                }
                                            };

                                            const paymentObject = new Razorpay(options);
                                            paymentObject.open();

                                        } catch (error) {
                                            console.error('Error:', error);
                                        }
                                    }

                                </script>

                                <ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300 xl:mt-10">
                                    <li class="flex gap-x-4">
                                        <i class="fas fa-lock-open"></i>
                                        Unlock Inspects
                                    </li>
                                    <li class="flex gap-x-3">
                                        <i class="fas fa-download"></i>Download Images
                                    </li>
                                    <li class="flex gap-x-3"><i class="fas fa-calendar-check"></i> Event Participation
                                    </li>
                                    <li class="flex gap-x-3"><i class="fas fa-hand-holding-usd"></i> Win Prices</li>
                                    <li class="flex gap-x-3"><i class="fas fa-trophy"></i> Chance To Get your name on
                                        Leadboard</li>
                                    <li class="flex gap-x-3"><i class="fas fa-comments"></i> Chat in BroadCast</li>
                                </ul>
                            </div>


                        </div>
                    </div>
                </div>
            </body>
            <% } %>

</html>